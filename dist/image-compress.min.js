!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.imageCompress=e()}(this,function(){"use strict";function t(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.left="-99999px",e.width=t.width,e.height=t.height,e}function e(e,i,h,n,d){var o=new Image;o.onerror=function(){d&&d()},o.onload=function(){var e,d=this.width,r=this.height,s=t({width:this.width,height:this.height});document.body.appendChild(s);var a=s.getContext("2d");a.drawImage(this,0,0,this.width,this.height),i=i||{},i.width>i.height?(o.width=i.width||800,e=100*o.width/d,o.height=r*(e/100)):(o.height=i.height||600,e=100*o.height/r,o.width=d*(e/100)),n&&n(s.toDataURL("image/jpeg",h||"0.5")),document.body.removeChild(s)},o.src=e}return e});